<!DOCTYPE html>
<html>
<head>
    <title>AllenNLP</title>
</head>
<body>
    <div id="bidaf">
        <h2>bidaf</h2>
        <form id="bidaf-form">
            <h3>Passage</h3>
            <div>
                <textarea name="bidaf-passage" id="bidaf-passage">The Seahawks are the only football team that plays in Seattle.</textarea>
            </div>
            <h3>Question</h3>
            <div>
                <textarea name="bidaf-question" id="bidaf-question">Which football team plays in Seattle?</textarea>
            </div>
            <div>
                <button type="button" onclick="runBidaf()">run bidaf</button>
            </div>
        </form>
        <div id="bidaf-output"></div>
    </div>  <!-- bidaf -->

    <hr>

    <div id="snli">
        <h2>decomposable attention</h2>
        <form id="snli-form">
            <h3>Premise</h3>
            <div>
                <textarea name="snli-premise" id="snli-premise">AllenNLP is the premier library for doing state of the art natural language processing.</textarea>
            </div>
            <h3>Hypothesis</h3>
            <div>
                <textarea name="snli-hypothesis" id="snli-hypothesis">AllenNLP is good at natural language processing</textarea>
            </div>
            <div>
                <button type="button" onclick="runSnli()">run decomposable attention</button>
            </div>
        </form>
        <div id="snli-output"></div>
    </div> <!-- snli -->

    <hr>

    <div id="srl">
        <h2>semantic role labeling</h2>
        <form id="srl-form">
            <h3>Sentence</h3>
            <div>
                <textarea name="srl-sentence" id="srl-sentence">Beavers build dams in order to impress technical recruiters.</textarea>
            </div>
            <div>
                <button type="button" onclick="runSrl()">run srl</button>
            </div>
        </form>
        <div id="srl-output"></div>
    </div> <!-- srl -->

    <script>


function runModel(modelName, inputs, outputDivId) {
    var xhr = new XMLHttpRequest();

    xhr.open('POST', 'predict/' + modelName);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onload = function() {
        if (xhr.status === 200) {
            document.getElementById(outputDivId).innerText = xhr.responseText;
        }
    }

    var input = {};
    for (var inputName in inputs) {
        var divId = inputs[inputName];
        var inputValue = document.getElementById(divId).value;
        input[inputName] = inputValue;
    }

    console.log(input);

    xhr.send(JSON.stringify(input));
}

function runBidaf() {
    runModel('bidaf', {"question": "bidaf-question", "passage": "bidaf-passage"}, "bidaf-output");
}

function runSnli() {
    runModel('snli', {"premise": "snli-premise", "hypothesis": "snli-hypothesis"}, "snli-output");
}

function runSrl() {
    runModel('srl', {"sentence": "srl-sentence"}, "srl-output");
}

    </script>

</body>
</html>
